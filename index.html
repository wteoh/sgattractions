<!DOCTYPE html>
<html>

<head>
    <!-- Include meta tag to ensure proper rendering and touch zooming -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Include jQuery Mobile stylesheets -->
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
    <!-- Include the jQuery library -->
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <!-- Include the jQuery Mobile library -->
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <!-- Include style sheet for cardview -->
    <link rel="stylesheet" href="./css/card.css">
    <!-- Include style sheet for thumbnail -->
    <link rel="stylesheet" href="./css/thumbnail.css">

    <script type="text/javascript">
        //Load store category into localstorage based on the link that was clicked.
        //redirect to attractions page

        $(document).on('click', 'a', function(event, ui) {
            var data_id = $(this).attr('id');
            // store some data
            if (typeof(Storage) !== "undefined") {
                localStorage.category = data_id;
            }
            // Change page
            $.mobile.changePage("#attractions");
        });

        $(document).on('click', 'li', function() {
            if (typeof(Storage) !== "undefined") {
                localStorage.attraction_id = $(this).attr("id");;
            }
            $.mobile.changePage("#attraction-details");
        });

        //load category data from category JSON and display
        $(document).on('pagebeforeshow', '#main', function() {
            $.getJSON("./json/category.json", function(data) {
                $.each(data, function(key, val) {
                    $('#category-cards').append("<div><a href='#' id='" + val.id + "'><div class='card'><div class='card-image'><img src='" + val.image + "'/><h2>" + val.name + "</h2></div></div></a>");
                });
            });
        });

        $(document).on('pagebeforeshow', '#attractions', function() {
            //do no reload if category is not undefined
            if (localStorage.category != "undefined") {
                //empty list to prevent duplicates
                $('#attraction-list').empty();
                //get attractions JSON and populate list based on category
                $.getJSON("./json/attractions.json", function(data) {
                    $.each(data, function(key, val) {
                        if (val.category == localStorage.category) {
                            $('#attraction-list').append("<li id='" + val.id + "' class='ui-li-has-thumb ui-first-child'><a class='ui-btn ui-btn-icon-right ui-icon-carat-r'><img src='" + val.image +
                                "' class='thumbnail'/><h2>" +
                                val.name + "</h2></a></li>");
                        }
                    });
                });
            }
        });

        $(document).on('pagebeforeshow', '#attraction-details', function() {
            //get attractions JSON and populate list based on category
            $.getJSON("./json/attractions.json", function(data) {
                $.each(data, function(key, val) {
                    if (val.id == localStorage.attraction_id) {
                        $('#attraction-image').html("<img src='" + val.image + "' width='100%'/><h4>" + val.name + "</h4>");
                        $('ophours').html("<b>Opening Hours: </b>" + val.operatinghours);

                        return false;
                    }
                });
            });
        });
    </script>
</head>

<body>

    <!-- MAIN PAGE THAT SHOWS ALL ATTRACTION CATEGORIES -->
    <div data-role="page" id="main">
        <!-- panel for the sliding left menu -->
        <div data-role="panel" data-position="left" data-position-fixed="false" data-display="reveal" id="nav-panel" data-theme="a">
            <ul data-role="listview" data-theme="a" data-divider-theme="a" style="margin-top:-16px;" class="nav-search">
                <li data-icon="delete" style="background-color:#111;">
                    <a href="#" data-rel="close">Home</a>
                </li>
                <li data-filtertext="wai-aria voiceover accessibility screen reader">
                    <a href="../about/accessibility.html">My Internaries</a>
                </li>
                <li data-filtertext="accordions collapsible set collapsible-set collapsed">
                    <a href="../content/content-collapsible-set.html">Accordions</a>
                </li>
            </ul>
        </div>
        <!-- header to add the menu to trigger sliding menu -->
        <div data-role="header">
            <h1>SG Atttrations</h1>
            <a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
        </div>
        <!-- cardview for all category -->
        <div class="ui-responsive ui-content" data-role="main" id="category-cards"></div>
    </div>

    <!-- ATTRACTIONS PAGE: SHOWS ALL ATTRACTION BASED ON CATEGORY SELECTED  -->
    <div data-role="page" id="attractions">

        <div data-role="panel" data-position="left" data-position-fixed="false" data-display="reveal" id="nav-panel" data-theme="a">
            <ul data-role="listview" data-theme="a" data-divider-theme="a" style="margin-top:-16px;" class="nav-search">
                <li data-icon="delete" style="background-color:#111;">
                    <a href="#" data-rel="close">Home</a>
                </li>
                <li data-filtertext="wai-aria voiceover accessibility screen reader">
                    <a href="../about/accessibility.html">My Internaries</a>
                </li>
                <li data-filtertext="accordions collapsible set collapsible-set collapsed">
                    <a href="../content/content-collapsible-set.html">Accordions</a>
                </li>
            </ul>
        </div>
        <div data-role="header">
            <h1>SG Atttrations</h1>
            <a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
        </div>
        <div data-role="main" class="ui-responsive ui-content">
            <ul data-role="listview" data-inset="true" id="attraction-list">
            </ul>
        </div>
    </div>

    <!-- ATTRACTION DETAILS PAGE: DISPLAY DETAILS OF THE SELECTED ATTRACTION  -->
    <div data-role="page" id="attraction-details">
        <div data-role="panel" data-position="left" data-position-fixed="false" data-display="reveal" id="nav-panel" data-theme="a">

            <ul data-role="listview" data-theme="a" data-divider-theme="a" style="margin-top:-16px;" class="nav-search">
                <li data-icon="delete" style="background-color:#111;">
                    <a href="#" data-rel="close">Home</a>
                </li>
                <li data-filtertext="wai-aria voiceover accessibility screen reader">
                    <a href="../about/accessibility.html">My Internaries</a>
                </li>
                <li data-filtertext="accordions collapsible set collapsible-set collapsed">
                    <a href="../content/content-collapsible-set.html">Accordions</a>
                </li>
            </ul>
        </div>
        <div data-role="header">
            <h1>SG Atttrations</h1>
            <a href="#nav-panel" data-icon="bars" data-iconpos="notext">Menu</a>
        </div>

        <div class="ui-responsive ui-content" data-role="main">

            <div class='card-image' id="attraction-image">
                <!-- <img src="./images/universal.jpg" width="100%" />
                <h4>universal studios singapore</h4> -->
            </div>


            <ul data-role="listview" data-inset="true" id="detail-list">
                <li>
                    <div style="font-size:13px;" id="ophours">
                        <b>Opening hours: </b>Daily 9am to 10pm
                    </div>
                </li>

                <li>
                    <div style="font-size:13px; ">
                        <b>Address: </b>woodlands ave 5
                    </div>
                </li>
                <li>

                    <div style="font-size:13px; ">
                        <b>Description</b>
                        <p style="white-space:normal;">
                            asdasdasdasdasdasd sadasdasdsdasdadasdasdasdasdasdasdasdasdadadsasdsadsad asdasdsadsasdasdasdasd
                        </p>
                    </div>
                </li>

            </ul>
            <a href="#" class="ui-btn ui-shadow ui-btn-icon-left ui-icon-plus">Add to Internary</a>
            <a href="#" class="ui-btn ui-shadow ui-btn-icon-left ui-icon-navigation">Find on map</a>
            <a href="#" class="ui-btn ui-shadow ui-shadow ui-btn-icon-left ui-icon-phone">Call</a>

        </div>

    </div>

</body>

</html>
